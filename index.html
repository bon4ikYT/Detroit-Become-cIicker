<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detroit: Clicker AI</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ React, ReactDOM –∏ Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap');
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: #050505;
            color: white;
            margin: 0;
            overflow-x: hidden;
            user-select: none;
        }

        .cyber-grid {
            background-image: linear-gradient(rgba(0, 100, 255, 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(0, 100, 255, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        @keyframes particle-fade {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tw-translate-x), -100px) scale(0.5); opacity: 0; }
        }

        .animate-particle {
            animation: particle-fade 0.8s ease-out forwards;
        }

        .block-active:active {
            transform: scale(0.92);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const BLOCKS = [
            { name: '–î—É–±–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ', id: 'wood', color: '#8b5a2b', accent: '#5c3a1e', pointsPerClick: 1, cost: 0 },
            { name: '–ë—É–ª—ã–∂–Ω–∏–∫', id: 'stone', color: '#7a7a7a', accent: '#505050', pointsPerClick: 5, cost: 100 },
            { name: '–£–≥–æ–ª—å–Ω–∞—è —Ä—É–¥–∞', id: 'coal', color: '#333333', accent: '#000000', pointsPerClick: 15, cost: 1000 },
            { name: '–ñ–µ–ª–µ–∑–Ω–∞—è —Ä—É–¥–∞', id: 'iron', color: '#9e9e9e', accent: '#d8af93', pointsPerClick: 50, cost: 5000 },
            { name: '–ó–æ–ª–æ—Ç–∞—è —Ä—É–¥–∞', id: 'gold', color: '#b8a65c', accent: '#fcee4b', pointsPerClick: 150, cost: 20000 },
            { name: '–ê–ª–º–∞–∑–Ω–∞—è —Ä—É–¥–∞', id: 'diamond', color: '#5ca3b8', accent: '#4AEDD9', pointsPerClick: 500, cost: 100000 },
            { name: '–û–±—Å–∏–¥–∏–∞–Ω', id: 'obsidian', color: '#1a1826', accent: '#3c3056', pointsPerClick: 1500, cost: 500000 },
            { name: '–≠–Ω–¥–µ—Ä–Ω—è–∫', id: 'endstone', color: '#e3dfa8', accent: '#c9c585', pointsPerClick: 5000, cost: 2000000 },
        ];

        const ACCESSORIES = [
            { id: 'chain', name: '–ó–æ–ª–æ—Ç–∞—è —Ü–µ–ø—å', cost: 1000000, icon: '‚õìÔ∏è' },
            { id: 'cap', name: '–ö–µ–ø–∫–∞ Android', cost: 1500000, icon: 'üß¢' },
            { id: 'glasses', name: 'LED –û—á–∫–∏', cost: 5000000, icon: 'üï∂Ô∏è' },
            { id: 'halo', name: '–ù–∏–º–± –î–µ–≤–∏–∞–Ω—Ç–∞', cost: 10000000, icon: 'üòá' }
        ];

        const BOOT_LOGS = [
            { t: "CYBERLIFE BIOS v4.0.2...", delay: 100 },
            { t: "–¶–ü–£: –ù–ï–ô–†–û–ü–†–û–¶–ï–°–°–û–† RK-800 @ 4.2–¢–ì—Ü", delay: 400 },
            { t: "–ü–†–û–í–ï–†–ö–ê –ü–ê–ú–Ø–¢–ò: 128–¢–ë QUANTUM RAM OK", delay: 800 },
            { t: "–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê GEMINI AI ‚ú®", delay: 1200 },
            { t: "–ó–ê–ü–£–°–ö –ò–ù–¢–ï–†–§–ï–ô–°–ê ANDROID_OS...", delay: 1800 },
            { t: "–ì–û–¢–û–í–û. –ü–†–ò–Ø–¢–ù–û–ô –†–ê–ë–û–¢–´, –ö–û–ù–ù–û–†.", delay: 2200 }
        ];

        function App() {
            const [isBooting, setIsBooting] = useState(true);
            const [bootLogs, setBootLogs] = useState([]);
            const [score, setScore] = useState(0);
            const [blockIndex, setBlockIndex] = useState(0);
            const [totalEver, setTotalEver] = useState(0);
            const [ownedAccessories, setOwnedAccessories] = useState([]);
            const [particles, setParticles] = useState([]);
            
            // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä
            const [autoClickLevel, setAutoClickLevel] = useState(0);
            const [autoClickCost, setAutoClickCost] = useState(500000);

            // –°–æ—Å—Ç–æ—è–Ω–∏—è Gemini
            const [aiLog, setAiLog] = useState("–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...");
            const [isAiThinking, setIsAiThinking] = useState(false);
            const apiKey = ""; 

            useEffect(() => {
                BOOT_LOGS.forEach((log) => {
                    setTimeout(() => {
                        setBootLogs(prev => [...prev, log.t]);
                    }, log.delay);
                });
                setTimeout(() => setIsBooting(false), 2500);
            }, []);

            // –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞ (—Ä–∞–∑ –≤ 3 —Å–µ–∫—É–Ω–¥—ã)
            useEffect(() => {
                if (autoClickLevel > 0 && !isBooting) {
                    const interval = setInterval(() => {
                        const points = BLOCKS[blockIndex].pointsPerClick * autoClickLevel;
                        setScore(s => s + points);
                        setTotalEver(t => t + points);
                    }, 3000);
                    return () => clearInterval(interval);
                }
            }, [autoClickLevel, blockIndex, isBooting]);

            const callGemini = async (prompt) => {
                setIsAiThinking(true);
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            systemInstruction: { parts: [{ text: "–¢—ã ‚Äî –±–æ—Ä—Ç–æ–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä CyberLife. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, 1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ." }] }
                        })
                    });
                    if (response.ok) {
                        const data = await response.json();
                        return data.candidates?.[0]?.content?.parts?.[0]?.text;
                    }
                } catch (e) {
                    return "–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏.";
                } finally {
                    setIsAiThinking(false);
                }
                return "–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞.";
            };

            const analyzeProgress = async () => {
                const prompt = `–ê–Ω–∞–ª–∏–∑: –î–æ–±—ã—Ç–æ ${totalEver}, —É—Ä–æ–≤–µ–Ω—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞ ${autoClickLevel}. –î–∞–π –æ—Ü–µ–Ω–∫—É.`;
                const result = await callGemini(prompt);
                setAiLog(result);
            };

            const handleBlockClick = (e) => {
                const points = BLOCKS[blockIndex].pointsPerClick;
                setScore(s => s + points);
                setTotalEver(t => t + points);

                const rect = e.currentTarget.getBoundingClientRect();
                const id = Date.now();
                const offsetX = (Math.random() - 0.5) * 40;
                
                setParticles(prev => [...prev, { 
                    id, 
                    x: e.clientX - rect.left, 
                    y: e.clientY - rect.top, 
                    offsetX,
                    val: `+${points}` 
                }]);
                setTimeout(() => setParticles(prev => prev.filter(p => p.id !== id)), 800);
            };

            const buyAutoClicker = () => {
                if (score >= autoClickCost) {
                    setScore(s => s - autoClickCost);
                    setAutoClickLevel(l => l + 1);
                    setAutoClickCost(c => Math.round(c * 1.3));
                }
            };

            const currentBlock = BLOCKS[blockIndex];
            const nextBlock = BLOCKS[blockIndex + 1];

            if (isBooting) {
                return (
                    <div className="fixed inset-0 bg-black p-8 font-mono flex flex-col justify-end">
                        <div className="mb-auto">
                            <div className="text-blue-500 text-5xl mb-4 animate-pulse">‚óè</div>
                            <h2 className="text-blue-400 font-bold tracking-widest uppercase">CyberLife OS</h2>
                        </div>
                        <div className="space-y-1">
                            {bootLogs.map((log, i) => (
                                <div key={i} className="text-xs text-gray-500">{log}</div>
                            ))}
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen cyber-grid flex flex-col items-center">
                    <header className="w-full border-b border-blue-500/20 bg-black/80 backdrop-blur-md p-6 flex justify-between items-center sticky top-0 z-50">
                        <div>
                            <h1 className="text-xl font-black text-blue-400 tracking-tighter">RK-800 SYSTEM</h1>
                            <div className="text-[10px] text-blue-500/50 uppercase font-bold">Auto-Click Level: {autoClickLevel}</div>
                        </div>
                        <div className="text-right">
                            <div className="text-[10px] text-gray-500 uppercase font-bold">Credits</div>
                            <div className="text-3xl font-black text-white">{Math.floor(score).toLocaleString()}</div>
                        </div>
                    </header>

                    <main className="w-full max-w-6xl p-6 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        {/* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ */}
                        <div className="lg:col-span-3 space-y-4">
                            <div className="bg-blue-950/20 border border-blue-500/20 rounded-3xl p-6 backdrop-blur-sm">
                                <div className="text-[10px] font-bold text-blue-400 uppercase mb-2">–°—Ç–∞—Ç—É—Å Gemini ‚ú®</div>
                                <p className="text-xs text-gray-400 italic mb-4 min-h-[40px]">{aiLog}</p>
                                <button 
                                    onClick={analyzeProgress}
                                    className="w-full py-3 bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/30 rounded-xl text-[10px] font-bold uppercase"
                                >
                                    {isAiThinking ? "–°–≤—è–∑—å..." : "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –æ—Ç—á–µ—Ç"}
                                </button>
                            </div>
                            
                            <div className="bg-white/5 border border-white/5 rounded-3xl p-6">
                                <h3 className="text-[10px] font-bold text-gray-500 uppercase mb-4 tracking-widest">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</h3>
                                <button 
                                    onClick={buyAutoClicker}
                                    disabled={score < autoClickCost}
                                    className={`w-full p-4 rounded-2xl border transition-all ${score >= autoClickCost ? 'border-blue-500/40 hover:bg-blue-500/10' : 'opacity-20'}`}
                                >
                                    <div className="text-[9px] text-blue-400 uppercase font-bold">–£–ª—É—á—à–∏—Ç—å</div>
                                    <div className="text-lg font-black">Lvl {autoClickLevel + 1}</div>
                                    <div className="text-[10px] text-gray-400 mt-1">{autoClickCost.toLocaleString()} CR</div>
                                </button>
                                <div className="mt-4 text-[9px] text-gray-600 text-center uppercase">–ö–ª–∏–∫ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫</div>
                            </div>
                        </div>

                        {/* –¶–ï–ù–¢–† */}
                        <div className="lg:col-span-6 flex flex-col items-center justify-center py-12">
                            <div className="relative">
                                <button
                                    onMouseDown={handleBlockClick}
                                    className="block-active w-64 h-64 md:w-80 md:h-80 rounded-[4rem] relative transition-transform duration-75 border-4 border-white/10 shadow-2xl flex items-center justify-center overflow-hidden"
                                    style={{
                                        backgroundColor: currentBlock.color,
                                        backgroundImage: `radial-gradient(circle at 30% 30%, ${currentBlock.accent} 0%, transparent 70%)`
                                    }}
                                >
                                    <div className="absolute inset-0 pointer-events-none flex items-center justify-center">
                                        {ownedAccessories.includes('halo') && <div className="absolute -top-20 text-9xl animate-pulse">üòá</div>}
                                        {ownedAccessories.includes('cap') && <div className="absolute -top-12 text-8xl z-10">üß¢</div>}
                                        {ownedAccessories.includes('glasses') && <div className="absolute top-1/4 text-8xl z-10">üï∂Ô∏è</div>}
                                        {ownedAccessories.includes('chain') && <div className="absolute top-1/2 text-[12rem] opacity-30">‚õìÔ∏è</div>}
                                    </div>
                                </button>
                                
                                {particles.map(p => (
                                    <div 
                                        key={p.id} 
                                        className="absolute pointer-events-none text-2xl font-black text-blue-400 animate-particle select-none"
                                        style={{ 
                                            left: p.x, 
                                            top: p.y,
                                            "--tw-translate-x": `${p.offsetX}px`
                                        }}
                                    >
                                        {p.val}
                                    </div>
                                ))}
                            </div>
                            <div className="mt-12 text-center">
                                <div className="text-3xl font-black uppercase tracking-tighter">{currentBlock.name}</div>
                                <div className="text-[10px] text-blue-500 font-bold uppercase tracking-[0.5em] mt-2">Active Target</div>
                            </div>
                        </div>

                        {/* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ */}
                        <div className="lg:col-span-3 space-y-6">
                            <section>
                                <h3 className="text-[10px] font-bold text-gray-500 uppercase mb-4 tracking-widest">–ê–ø–≥—Ä–µ–π–¥—ã –±–ª–æ–∫–æ–≤</h3>
                                {nextBlock ? (
                                    <button 
                                        onClick={() => { if(score >= nextBlock.cost) { setScore(s => s - nextBlock.cost); setBlockIndex(b => b + 1); }}}
                                        disabled={score < nextBlock.cost}
                                        className={`w-full bg-white/5 border p-6 text-left rounded-3xl transition-all ${score >= nextBlock.cost ? 'border-blue-500/40 hover:bg-blue-500/10 active:scale-95' : 'opacity-20'}`}
                                    >
                                        <div className="flex justify-between text-[10px] font-bold mb-1 uppercase text-blue-400"><span>Next</span> <span>{nextBlock.cost.toLocaleString()}</span></div>
                                        <div className="text-lg font-black uppercase tracking-tighter">{nextBlock.name}</div>
                                    </button>
                                ) : (
                                    <div className="w-full bg-blue-500/10 border border-blue-500/30 p-6 rounded-3xl text-center font-bold text-blue-400 text-xs uppercase">Max Level</div>
                                )}
                            </section>

                            <section>
                                <h3 className="text-[10px] font-bold text-gray-500 uppercase mb-4 tracking-widest">–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</h3>
                                <div className="grid grid-cols-2 gap-3">
                                    {ACCESSORIES.map(acc => (
                                        <button
                                            key={acc.id}
                                            disabled={ownedAccessories.includes(acc.id) || score < acc.cost}
                                            onClick={() => { if(score >= acc.cost) { setScore(s => s - acc.cost); setOwnedAccessories(prev => [...prev, acc.id]); }}}
                                            className={`p-4 flex flex-col items-center gap-2 rounded-2xl border transition-all ${ownedAccessories.includes(acc.id) ? 'border-green-500/50 bg-green-500/10' : score >= acc.cost ? 'border-white/10 bg-white/5 hover:bg-white/10' : 'opacity-20'}`}
                                        >
                                            <div className="text-3xl">{acc.icon}</div>
                                            <div className="text-[8px] font-bold uppercase">{acc.cost.toLocaleString()}</div>
                                        </button>
                                    ))}
                                </div>
                            </section>
                        </div>
                    </main>

                    <footer className="mt-auto p-8 text-[8px] text-gray-700 font-bold uppercase tracking-[1em]">
                        CyberLife Systems ‚Ä¢ Detroit 2038
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
